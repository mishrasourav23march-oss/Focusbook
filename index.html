<!DOCTYPE html>
</div>
</div>


<button class="next-btn">Next: Self-Regulated Learning â†’</button>


</div>


<div class="collapse-btn" onclick="toggleCollapse()">Collapse</div>
</div>


<script>


/* -------- SLIDE IN ANIMATION -------- */
window.addEventListener("load", () => {
setTimeout(() => {
document.getElementById("learningManager").classList.add("visible");
}, 300);
});


/* -------- TIMER -------- */
let seconds = 0;
setInterval(() => {
seconds++;
let m = String(Math.floor(seconds / 60)).padStart(2,'0');
let s = String(seconds % 60).padStart(2,'0');
document.getElementById("timer").textContent = `${m}:${s}`;
document.getElementById("timeSpent").textContent = Math.floor(seconds/60)+"m";
},1000);


/* -------- SCROLL TRACKING -------- */
window.addEventListener("scroll", () => {
let scrollTop = window.scrollY;
let docHeight = document.body.scrollHeight - window.innerHeight;
let percent = Math.round((scrollTop/docHeight)*100);


percent = Math.max(0, Math.min(100, percent));


document.getElementById("scrollPercent").textContent = percent + "%";
document.getElementById("progressFill").style.width = percent + "%";


let focus = Math.min(100, Math.floor(percent * 0.9));
document.getElementById("focusScore").textContent = focus + "%";


if(percent > 80){
let text = document.getElementById("criteriaText");
text.textContent = "All criteria met. Great focus!";
text.classList.remove("status-red");
text.classList.add("status-green");
}
});


/* -------- COLLAPSE -------- */
function toggleCollapse(){
document.getElementById("learningManager").classList.toggle("collapsed");
}


/* -------- AUTO HIDE WHILE READING -------- */
let hideTimer;
window.addEventListener("scroll", () => {
const manager = document.getElementById("learningManager");
manager.classList.add("hidden");
clearTimeout(hideTimer);
hideTimer = setTimeout(()=>{
manager.classList.remove("hidden");
},1500);
});


</script>


</body>
</html>
