<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FOCUSBOOK Learning Manager - Level 2</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #0f172a;
        color: white;
        line-height: 1.6;
    }

    .content {
        max-width: 800px;
        margin: auto;
        padding: 40px 20px;
    }

    h1 { color: #facc15; }

    .section {
        margin-bottom: 80px;
        padding: 20px;
        background: #020617;
        border-radius: 12px;
    }

    /* Learning Manager */
    .learning-manager {
    position: fixed;
    top: 90px;
    right: 20px;
    width: 320px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
    z-index: 9999;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}

/* Ensures content does not push learning manager down in Google Sites iframe */
.container {
    display: flex;
    align-items: flex-start;
}

.content {
    flex: 1;
    margin-right: 360px;
}

/* Prevent horizontal scroll issues inside iframe */
body {
    overflow-x: hidden;
}

    .mentor {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
    }

    .avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: linear-gradient(135deg,#facc15,#eab308);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: #111827;
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
        0%,100% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
    }

    .mentor-text {
        font-size: 14px;
        color: #e5e7eb;
    }

    .progress-bar {
        height: 10px;
        background: #1f2937;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 10px;
    }

    .progress-fill {
        height: 100%;
        width: 0%;
        background: #ef4444;
        transition: width 0.3s ease;
    }

    .status { font-size: 14px; margin: 8px 0; }
    .status.red { color: #ef4444; }
    .status.green { color: #22c55e; }

    .timer, .focus-score, .scroll-status, .completion-score {
        font-size: 14px;
        margin-bottom: 6px;
    }

    .completion-score {
        font-weight: bold;
        color: #facc15;
    }

    .warning {
        font-size: 13px;
        color: #f97316;
        display: none;
    }

    .checklist label {
        display: block;
        margin: 6px 0;
        cursor: pointer;
    }
</style>
</head>

<body>

<!-- ================= LESSON CONTENT AREA ================= -->
<!--
FOCUSBOOK TEMPLATE INSTRUCTIONS:

You only paste your lesson text below inside the div with id="lessonRaw".

RULES:
1. First line = Lesson Title
2. Leave ONE empty line after title
3. Use empty lines between paragraphs
4. Use ALL CAPS line for section headings

Example:

SELF PACED STUDY STRATEGY

WHAT THIS MEANS
Self paced study allows learners...

WHY IT WORKS
Research shows...

The system will automatically format it.
-->

<div class="content" id="lessonContent">
    <div id="lessonRaw" style="display:none;">
### Optimizing Student Achievement Through Evidence-Based Learning and Self-Regulation

The pursuit of academic success is increasingly guided by instructional theories that leverage the mechanics of human cognition and motivation. By integrating strategies like the testing effect, spacing, and interleaving within frameworks like mastery learning and self-regulated learning (SRL), educators and students can create more efficient and durable paths to competence.

#### Core Cognitive Strategies for Long-Term Retention

Research consistently demonstrates that certain study techniques significantly outperform others in producing long-term retention.

The Testing Effect: Taking tests on material, rather than just rereading it, can sometimes more than double retention. While students often favor rereading, retrieval practice through answering or generating questions leads to superior memory performance. Generating one's own questions may promote deeper engagement through synthesis and elaboration, though it is often less time-efficient than answering provided questions.

The Spacing Effect: Learning is most effective when study sessions are spaced out over time rather than crammed into massed presentations. Spacing reduces the probability of forgetting by ensuring active recall occurs at increasing intervals.

Interleaved Practice: Mixing different types of problems or topics during a single study session, known as interleaving, requires students to choose the correct strategy for each problem. This strengthens the association between a problem's features and its corresponding solution strategy.

#### Frameworks for Achieving Competence

To ensure all students reach a high level of proficiency, comprehensive models like mastery learning provide structured pathways for development.

Mastery Learning Model: This approach requires students to reach a predefined level of mastery (often 80–90%) before proceeding to new material. The cycle involves initial instruction, formative assessment, and corrective activities for those who do not initially meet the standard. Mastery learning emphasizes that every student can learn if given sufficient help and time.

Cognitive Load Management: Effective instruction must account for the limited capacity of working memory. Intrinsic load (the difficulty of the content) must be balanced with the reduction of extraneous load (unnecessary distractions from poor design) to maximize self-perceived learning.

#### The Power of Self-Regulated Learning (SRL)

Success in complex or self-paced environments relies heavily on a student's ability to self-regulate. Zimmerman’s cyclical model describes SRL through three phases:

1. Forethought: This includes task analysis (goal setting and strategic planning) and self-motivation beliefs like self-efficacy, autonomy, and interest.
2. Performance: The phase where learners use metacognitive and volitional control to stay on task.
3. Self-Reflection: Learners evaluate their performance and assign causal attributions, which then influence their future motivation and goals.

#### Metacognition and Self-Pacing

Self-paced learning allows students to achieve competency at their own rate. However, its effectiveness depends on metacognitive monitoring accuracy—the ability to judge what has been learned and what still needs study. Successful self-pacers often use a discrepancy reduction strategy, where they allocate more study time to items they judge to be normatively difficult. Conversely, poor monitoring can lead to procrastination, characterized by study bursts immediately before a deadline. Strategies to deter procrastination include contingent schedules, where access to new practice materials is only granted after completing previous tasks.

#### Practical Implementation in Digital Contexts

Digital learning provides unique opportunities to satisfy the need for autonomy by allowing learners to choose when and how they engage with material. To optimize these environments, designers should provide:

Clear Learning Goals: Using SMART or Mager models to define what constitutes success.

Actionable Feedback: Providing specific information on how to bridge the gap between current and desired performance.

Support for Relatedness: Overcoming the isolation of online learning through forums, peer mentoring, or collaborative arrangements.

By combining these components, learners can transition from passive recipients of information to active, self-regulated masters of their own education.

    </div>

    <div id="lessonFormatted"></div>
</div>


<!-- ================= LEARNING MANAGER ================= -->

<div class="learning-manager">

    <div class="mentor">
        <div class="avatar">M</div>
        <div class="mentor-text" id="mentorMessage">
            Stay focused. Complete each step to finish the lesson.
        </div>
    </div>

    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="timer">Time on page: <span id="timer">00:00</span></div>
    <div class="focus-score">Focus score: <span id="focusScore">100%</span></div>
    <div class="scroll-status">Scroll progress: <span id="scrollStatus">0%</span></div>
    <div class="completion-score">Completion Score: <span id="completionScore">0%</span></div>

    <div class="warning" id="idleWarning">You seem inactive. Stay focused.</div>

    <div class="checklist">
        <label><input type="checkbox" class="task"> Concept understood</label>
        <label><input type="checkbox" class="task"> Practiced questions</label>
        <label><input type="checkbox" class="task"> Self-tested</label>
        <label><input type="checkbox" class="task"> Reviewed again</label>
    </div>

    <div id="status" class="status red">Complete all steps before continuing.</div>

</div>

<script>

/* ================= AUTO FORMAT LESSON ================= */
const rawText = document.getElementById("lessonRaw").innerText.trim();
const lines = rawText.split("\n");
const container = document.getElementById("lessonFormatted");

let firstLine = true;
let currentSection = null;

lines.forEach(line => {
    line = line.trim();
    if (!line) return;

    if (firstLine) {
        const title = document.createElement("h1");
        title.textContent = line;
        container.appendChild(title);
        firstLine = false;
        return;
    }

    if (line === line.toUpperCase()) {
        currentSection = document.createElement("div");
        currentSection.className = "section";

        const heading = document.createElement("h2");
        heading.textContent = line;

        currentSection.appendChild(heading);
        container.appendChild(currentSection);
        return;
    }

    const p = document.createElement("p");
    p.textContent = line;

    if (currentSection) {
        currentSection.appendChild(p);
    } else {
        container.appendChild(p);
    }
});


/* ================= TIMER ================= */
let seconds = 0;
setInterval(() => {
    seconds++;
    let mins = Math.floor(seconds / 60);
    let secs = seconds % 60;
    document.getElementById("timer").textContent =
        String(mins).padStart(2, '0') + ":" + String(secs).padStart(2, '0');
    updateCompletionScore();
}, 1000);


/* ================= CHECKLIST + PROGRESS ================= */
const tasks = document.querySelectorAll('.task');
const progressFill = document.getElementById('progressFill');
const status = document.getElementById('status');

function updateProgress() {
    let checked = document.querySelectorAll('.task:checked').length;
    let total = tasks.length;
    let percent = (checked / total) * 100;

    progressFill.style.width = percent + "%";

    if (checked === total) {
        progressFill.style.background = "#22c55e";
        status.textContent = "Good progress. You are ready to continue.";
        status.classList.remove('red');
        status.classList.add('green');
        document.getElementById("mentorMessage").textContent = "Excellent. You completed all learning actions.";
    } else {
        progressFill.style.background = "#ef4444";
        status.textContent = "Complete all steps before continuing.";
        status.classList.remove('green');
        status.classList.add('red');
    }

    updateCompletionScore();
}

tasks.forEach(task => task.addEventListener('change', updateProgress));


/* ================= SCROLL TRACKING ================= */
let scrollPercentGlobal = 0;
window.addEventListener('scroll', () => {
    const content = document.getElementById('lessonContent');
    const scrollTop = window.scrollY;
    const height = content.scrollHeight - window.innerHeight;
    scrollPercentGlobal = Math.min(100, Math.round((scrollTop / height) * 100));

    document.getElementById('scrollStatus').textContent = scrollPercentGlobal + "%";
    updateCompletionScore();
});


/* ================= IDLE DETECTION ================= */
let idleTime = 0;
let focusScore = 100;

setInterval(() => {
    idleTime++;
    if (idleTime > 10) {
        document.getElementById("idleWarning").style.display = "block";
        focusScore = Math.max(40, focusScore - 2);
    }
    document.getElementById("focusScore").textContent = focusScore + "%";
    updateCompletionScore();
}, 1000);

function resetIdle() {
    idleTime = 0;
    document.getElementById("idleWarning").style.display = "none";
}

window.addEventListener('mousemove', resetIdle);
window.addEventListener('keydown', resetIdle);
window.addEventListener('scroll', resetIdle);


/* ================= COMPLETION SCORE ================= */
function updateCompletionScore() {
    let taskScore = document.querySelectorAll('.task:checked').length / tasks.length;
    let timeScore = Math.min(1, seconds / 180);
    let scrollScore = scrollPercentGlobal / 100;

    let finalScore = Math.round((taskScore * 50) + (timeScore * 20) + (scrollScore * 30));

    document.getElementById("completionScore").textContent = finalScore + "%";
}

</script>

</body>
</html>
